{{ $data_path := index $.Site.Data (split (.Get "data_path") "/") }}
{{ range $data_path }}
{{ $id := urlize .name }}
{{ $command := strings.TrimPrefix "chef-automate " .name }}
  <h3 id="{{ $id }}">{{ .name }}</h2>
  <div>
    {{- range .compatiblestring -}}
      <b class="{{ .id }}" style="font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;">
      <i>{{ .name }}</i> </b> &nbsp; {{ if .tag }}</b> <b style="font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:6px;display:inline-block;background-color: #E4B2F2;"> <i> Node:{{ .tag }} </i> </b>{{ end }}
     {{- end -}}
  </div>
  <p>{{ .description }}</p>

  <h4 id="{{ $id }}-usage">Usage</h3>
  <pre><code>{{ .usage }}</code></pre>

  <h4 id="{{ $id }}-flags">Flags</h3>
    <div>
      <table style="width:70%">
        <tr>
          <td>--file</td>
          <td>File path to write the config (default: config.toml)</td>
          <td><b style='background: #8FECE6;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>HA</b></td>
        </tr>
        <tr>
          <td>-h, --help</td>
          <td>help for init-config-ha (default: false)</td>
          <td><b style='background: #8FECE6;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>HA</b><b style='background: #9bf285;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>A</b></td>
        </tr>
        <tr>
          <td>--path</td>
          <td>a2ha hab workspace dir path (default: /hab/a2_deploy_workspace/)</td>
          <td><b style='background: #8FECE6;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>HA</b><b style='background: #9bf285;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>A</b></td>
        </tr>
          <tr>
            <td>-d, --debug</td>
            <td>Enable debug output (default: false)</td>
            <td><b style='background: #8FECE6;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>HA</b></td>
          </tr>
          <tr>
            <td>--no-check-version</td>
            <td>Disable version check (default: false)</td>
            <td><b style='background: #9bf285;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>A</b></td>
          </tr>
          <tr>
            <td>--result-json</td>
            <td>Write command result as JSON to PATH</td>
            <td><b style='background: #8FECE6;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>HA</b><b style='background: #9bf285;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>A</b></td>
        </tr>
        </table>
    </div>

    <!--
  <h4 id="{{ $id }}-flags">Flags</h3>
  <div class="fake-code grid-x">
    {{- range .options -}}
    <div class="cell medium-4">{{ .compatibilitystring }}</b>{{ if .shorthand }}-{{ .shorthand }}, {{ end }}--{{ .name }}</div>
    <div class="cell medium-8">{{ .usage }}{{ if .default_value }} (default: {{ .default_value }}){{ end }}<b style='background: #8FECE6;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>{{ .compatibilitystring }}</b></div>
    {{- end -}}
    {{- range .inherited_options -}}
    <div class="cell medium-4">{{ .compatibilitystring }}</b>{{ if .shorthand }}-{{ .shorthand }}, {{ end }}--{{ .name }}</div>
    <div class="cell medium-8">{{ .usage }}{{ if .default_value }} (default: {{ .default_value }}){{ end }}<b style='background: #8FECE6;font-size: 10px;font-weight:600;line-height:20px;padding:0px 5px;margin:3px 0;border-radius:36px;display:inline-block;'>{{ .compatibilitystring }}</b></div>
    {{- end -}}
  </div>
  -->
  <h4 id="{{ $id }}-see-also">See Also</h3>
  <div class="grid-x">
    {{ range .see_also }}
    {{ $sa_bits := split . " - " }}
    {{ $sa_id := index $sa_bits 0 }}
    {{ $sa_string := index $sa_bits 1 }}

    {{ $sa_command := "" }}
    {{ $sa_command_id := "" }}

    {{ if ( hasPrefix $id (urlize $sa_id ) )}}
      {{ $sa_command_id = urlize $sa_id }}
      {{ $sa_command = strings.TrimPrefix "chef-automate " $sa_id }}
    {{ else }}
      {{ $sa_command_id = urlize (print $id "-" $sa_id) }}
      {{ $sa_command = print $command " " $sa_id }}
    {{ end }}

    <div class="cell medium-3"><a href="#{{ $sa_command_id }}">{{ $sa_command }}</a></div>
    <div class="cell medium-9">{{ $sa_string }}</div>
    {{ end }}
  </div>
{{ end }}


<style>

.Automate_HA {
  background: #8FECE6;
}

.Automate {
  background: #9bf285;
}

table, th, td {
  border: 1px solid;
}

h5 {
  font-size: 11px;
}
.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  text-align: center;
  border-radius: 6px;
  padding: 5px 0;

  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
</style>